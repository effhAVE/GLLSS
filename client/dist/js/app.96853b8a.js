(function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"4a82":function(e,t,a){"use strict";var n=a("a535"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-snackbar",{attrs:{color:e.snackbar.type,bottom:"",right:"","multi-line":""},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v(" "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.show=!1}}},[e._v(" Close ")])],1),e.user?a("v-navigation-drawer",{attrs:{app:"",clipped:"",color:"primary lighten-1"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:"",to:"/"}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-view-dashboard")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Overview")])],1)],1),a("v-list-item",{attrs:{link:"",to:"/tournaments"}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-format-list-bulleted")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Tournaments")])],1)],1),e.user.roles.includes("admin")?a("v-list-group",{attrs:{"prepend-icon":"mdi-shield-account",color:"accent",value:e.$route.path.includes("admin")},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",[e._v("Admin")])]},proxy:!0}],null,!1,3509839752)},[a("v-list-item",{attrs:{link:"",to:"/admin/users"}},[a("v-list-item-content",[a("v-list-item-title",[e._v("Users")])],1)],1),a("v-list-item",{attrs:{link:"",to:"/admin/unconfirmed"}},[a("v-list-item-content",[a("v-list-item-title",[e._v("Confirm users")])],1)],1),a("v-list-item",{attrs:{link:"",to:"/admin/tournaments/create"}},[a("v-list-item-content",[a("v-list-item-title",[e._v("Create a tournament")])],1)],1)],1):e._e()],1)],1):e._e(),a("v-app-bar",{attrs:{app:"","clipped-left":"",flat:"",color:"secondary"}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[e._v("GLL Staff Scheduler")]),a("v-spacer"),e.user?a("span",{staticClass:"accent--text font-weight-bold mr-4"},[e._v(e._s(e.user.nickname))]):e._e(),e.isLoggedIn?a("v-btn",{attrs:{text:""},on:{click:e.logout}},[e._v(" Logout ")]):a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$router.push("/login")}}},[e._v(" Log in ")])],1),a("v-content",{staticClass:"primary"},[a("router-view",{staticClass:"pa-8",attrs:{user:e.user}})],1),a("v-footer",{attrs:{app:"",color:"primary darken-1"}},[a("v-spacer"),a("span",[e._v("Created for GLL by "),a("a",{attrs:{href:"#"}},[e._v("hAVE")]),e._v(" Â© 2020")]),a("v-spacer")],1)],1)},o=[],s=(a("d3b7"),{data:function(){return{drawer:null,snackbar:{show:!1,type:"",message:""}}},created:function(){var e=this;this.$http.interceptors.response.use((function(e){return e}),(function(e){var t=e.response?e.response.status:null;return new Promise((function(a,n){throw 401===t&&this.$store.dispatch("logout"),e}))})),this.$store.subscribe((function(t,a){"snackbarMessage"===t.type&&(e.snackbar.show=!0,e.snackbar.message=t.payload.message,e.snackbar.type=t.payload.type)}))},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},token:function(){return this.$store.state.token},user:function(){return this.$jwt.decode(this.token)}},methods:{logout:function(){this.$store.dispatch("logout")}}}),i=s,c=a("2877"),l=a("6544"),u=a.n(l),d=a("7496"),m=a("40dc"),v=a("5bc1"),f=a("8336"),p=a("a75b"),h=a("553a"),b=a("132d"),g=a("8860"),k=a("56b0"),_=a("da13"),y=a("1800"),x=a("5d23"),w=a("f774"),S=a("2db4"),V=a("2fa4"),T=a("2a7f"),$=Object(c["a"])(i,r,o,!1,null,null,null),C=$.exports;u()($,{VApp:d["a"],VAppBar:m["a"],VAppBarNavIcon:v["a"],VBtn:f["a"],VContent:p["a"],VFooter:h["a"],VIcon:b["a"],VList:g["a"],VListGroup:k["a"],VListItem:_["a"],VListItemAction:y["a"],VListItemContent:x["a"],VListItemTitle:x["b"],VNavigationDrawer:w["a"],VSnackbar:S["a"],VSpacer:V["a"],VToolbarTitle:T["a"]});a("7db0"),a("caad"),a("45fc"),a("b0c0"),a("2532");var D=a("8c4f"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user.roles.includes("guest")?a("div",[a("p",[e._v(" Thank you for signing up. Before you continue, you must be confirmed by an admin. ")]),a("p",[e._v(" Here is the list of current admins: ")]),e._l(e.admins,(function(t){return a("ul",{key:t._id},[a("li",[e._v(e._s(t.nickname))])])}))],2):a("div",[a("p",[e._v("Welcome "+e._s(e.user.nickname)+"!")])])},E=[],A={name:"Home",data:function(){return{admins:[]}},computed:{user:function(){return this.$jwt.decode(this.$store.state.token)}},created:function(){var e=this,t="/api";this.$http.get("".concat(t,"/users/admins")).then((function(t){e.admins=t.data}))}},L=A,M=Object(c["a"])(L,R,E,!1,null,null,null),I=M.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12",attrs:{color:"primary"}},[a("v-toolbar",{attrs:{color:"secondary",flat:""}},[a("v-toolbar-title",[e._v("Sign in to continue")]),a("v-spacer")],1),a("v-form",[a("v-card-text",[a("v-text-field",{attrs:{name:"email",color:"accent",placeholder:"Email","prepend-icon":"mdi-email",type:"text",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{id:"password",color:"accent",placeholder:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-card-actions",[a("p",{staticClass:"mb-0"},[e._v(" No account? "),a("a",{attrs:{href:"/register"}},[e._v(" Register now!")])]),a("v-spacer"),a("v-btn",{staticClass:"black--text",attrs:{color:"accent",large:"",type:"submit"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Sign in")])],1)],1)],1)],1)],1)],1)},j=[],H={data:function(){return{email:"",password:"",error:""}},methods:{login:function(){var e=this,t=this.email,a=this.password;this.$store.dispatch("login",{email:t,password:a}).then((function(){e.$router.push("/"),e.$store.commit("snackbarMessage",{message:"Successfully logged in.",type:"success"})})).catch((function(t){e.$store.commit("snackbarMessage",{message:t.response.data,type:"error"})}))}}},U=H,P=a("b0af"),q=a("99d9"),F=a("62ad"),B=a("a523"),N=a("4bd4"),Q=a("0fd9"),G=a("8654"),Y=a("71d9"),J=Object(c["a"])(U,O,j,!1,null,null,null),W=J.exports;u()(J,{VBtn:f["a"],VCard:P["a"],VCardActions:q["a"],VCardText:q["c"],VCol:F["a"],VContainer:B["a"],VForm:N["a"],VRow:Q["a"],VSpacer:V["a"],VTextField:G["a"],VToolbar:Y["a"],VToolbarTitle:T["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12",attrs:{color:"primary"}},[a("v-toolbar",{attrs:{color:"secondary",flat:""}},[a("v-toolbar-title",[e._v("Registration form")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{name:"nickname",color:"accent",placeholder:"Nickname","prepend-icon":"mdi-account",type:"text",required:""},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),a("v-text-field",{attrs:{name:"email",color:"accent",placeholder:"Email","prepend-icon":"mdi-email",type:"text",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{id:"password",color:"accent",placeholder:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"black--text",attrs:{color:"accent",large:""},on:{click:e.register}},[e._v("Register")])],1)],1)],1)],1)],1)},K=[],X={data:function(){return{email:"",nickname:"",password:"",error:""}},methods:{register:function(){var e=this,t=this.email,a=this.password,n=this.nickname;this.$store.dispatch("register",{email:t,password:a,nickname:n}).then((function(){e.$router.push("/"),e.$store.commit("snackbarMessage",{message:"Successfully registed!",type:"success"})})).catch((function(t){e.$store.commit("snackbarMessage",{message:t.response.data,type:"error"})}))}}},Z=X,ee=Object(c["a"])(Z,z,K,!1,null,null,null),te=ee.exports;u()(ee,{VBtn:f["a"],VCard:P["a"],VCardActions:q["a"],VCardText:q["c"],VCol:F["a"],VContainer:B["a"],VForm:N["a"],VRow:Q["a"],VSpacer:V["a"],VTextField:G["a"],VToolbar:Y["a"],VToolbarTitle:T["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%",color:"transparent"}},[a("v-snackbar",{attrs:{color:"secondary border--accent",bottom:"",absolute:"",right:"","multi-line":"",timeout:0},model:{value:e.availableQueue.length,callback:function(t){e.$set(e.availableQueue,"length",t)},expression:"availableQueue.length"}},[e._v(" You have "+e._s(e.availableQueue.length)+" availability change "),1!==e.availableQueue.length?a("span",[e._v(" s ")]):e._e(),e._v(". Do you want to save them? "),a("v-btn",{attrs:{text:"",color:"accent"},on:{click:e.onAvailabilitySubmit}},[e._v(" Save ")])],1),a("v-card-title",[e._v(" Tournaments "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"table-background",attrs:{items:e.tournamentsList,search:e.search,headers:e.headers,expanded:e.expanded,loading:!e.tournamentsList.length,"show-expand":"","item-key":"_id"},on:{"update:expanded":function(t){e.expanded=t},"click:row":e.redirect},scopedSlots:e._u([{key:"item.rounds",fn:function(t){var n=t.item;return[a("div",{staticClass:"d-flex justify-space-between"},[a("v-simple-checkbox",{attrs:{color:"accent","on-icon":e.setIcon(n),value:e.checkTournamentAvailability(n),ripple:!1}}),a("v-simple-checkbox",{attrs:{color:"accent",value:e.isHostingTournament(n.rounds),ripple:!1}})],1)]}},{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{attrs:{colspan:n.length}},[a("v-simple-table",{staticClass:"table-background-inner",scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[e._v("Available")]),a("th",[e._v("Round name")]),a("th",[e._v("Start date")]),a("th",[e._v("End date")])])]),a("tbody",e._l(r.rounds,(function(t){return a("tr",{key:t._id},[a("td",[a("v-simple-checkbox",{attrs:{disabled:t.isHosting,color:"accent",ripple:!1},on:{input:function(a){return e.onAvailabilityChange(a,r,t)}},model:{value:t.myAvailability,callback:function(a){e.$set(t,"myAvailability",a)},expression:"round.myAvailability"}})],1),a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(new Date(t.startDate).toLocaleString()))]),a("td",[e._v(e._s(new Date(t.endDate).toLocaleString()))])])})),0)]},proxy:!0}],null,!0)})],1)]}},{key:"item.startDate",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(new Date(n.startDate).toLocaleString()))])]}},{key:"item.endDate",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(new Date(n.endDate).toLocaleString()))])]}}])})],1)},ne=[],re=(a("99af"),a("a623"),a("4de4"),a("4160"),a("a434"),a("3ca3"),a("159b"),a("ddb0"),{props:{user:Object},data:function(){return{search:"",tournamentsList:[],expanded:[],availableQueue:[],headers:[{text:"Available / Selected",value:"rounds",width:150,sortable:!1},{text:"Tournament name",align:"start",sortable:!1,value:"name"},{text:"Game",value:"game",align:"center",width:200},{text:"Rounds",value:"rounds.length",align:"center",width:100,sortable:!1},{text:"Start date",value:"startDate"},{text:"End date",value:"endDate"},{text:"",value:"data-table-expand"}]}},methods:{getTournaments:function(){var e=this,t="/api";this.$http.get("".concat(t,"/tournaments/")).then((function(t){var a=t.data;a.forEach((function(t){t.rounds.forEach((function(t){t.isHosting=e.isHosting(t),t.myAvailability=e.checkAvailability(t)}))})),e.tournamentsList=a}))},checkAvailability:function(e){return e.available.includes(this.user._id)},isHosting:function(e){var t=this;return e.hosts.some((function(e){return e.host===t.user._id}))},isHostingTournament:function(e){return e.some((function(e){return e.isHosting}))},onAvailabilityChange:function(e,t,a){var n=this.availableQueue.find((function(e){return e.roundID===a._id}));n?this.availableQueue=this.availableQueue.filter((function(e){return e!==n})):this.availableQueue.push({tournamentID:t._id,roundID:a._id,value:e})},onAvailabilitySubmit:function(){var e=this,t="/api",a=[];this.availableQueue.forEach((function(n){a.push(e.$http.put("".concat(t,"/tournaments/").concat(n.tournamentID,"/rounds/").concat(n.roundID,"/availability"),{value:n.value,id:e.user._id}))})),this.availableQueue.splice(0),Promise.all(a).then((function(){e.$store.commit("snackbarMessage",{message:"Availability saved!",type:"success"})})).catch((function(t){return e.$store.commit("snackbarMessage",{message:"Error while saving availability.",type:"error"})}))},setIcon:function(e){return e.rounds.every((function(e){return!1===e.myAvailability}))?"":e.rounds.every((function(e){return!0===e.myAvailability}))?"mdi-checkbox-marked":"mdi-minus-box"},checkTournamentAvailability:function(e){return!!this.setIcon(e)},redirect:function(e){return this.$router.push("/tournaments/".concat(e._id))}},mounted:function(){this.getTournaments()},watch:{$route:"getTournaments"}}),oe=re,se=(a("4a82"),a("8fea")),ie=a("9e88"),ce=a("1f4f"),le=Object(c["a"])(oe,ae,ne,!1,null,null,null),ue=le.exports;u()(le,{VBtn:f["a"],VCard:P["a"],VCardTitle:q["d"],VDataTable:se["a"],VSimpleCheckbox:ie["a"],VSimpleTable:ce["a"],VSnackbar:S["a"],VSpacer:V["a"],VTextField:G["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.tournament?a("v-card",{attrs:{height:"100%",color:"transparent"}},[a("v-card-title",[e._v(" "+e._s(e.tournament.name)+" "),a("v-spacer"),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[e.user.roles.includes("admin")?a("v-btn",e._g({staticClass:"success mr-4"},n),[e._v(" Add round ")]):e._e()]}}],null,!1,876467231),model:{value:e.addRoundModal,callback:function(t){e.addRoundModal=t},expression:"addRoundModal"}},[a("v-card",{staticClass:"primary"},[a("v-card-text",[a("v-container",[a("RoundForm",{attrs:{tournamentDates:{start:e.tournament.startDate,end:e.tournament.endDate}},on:{cancel:function(t){e.addRoundModal=!1},submit:function(t){return e.addNewRound(t)}}})],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"primary"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[e.user.roles.includes("admin")?a("v-btn",e._g({staticClass:"error"},n),[e._v(" Delete tournament ")]):e._e()]}}],null,!1,1156372281),model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Are you sure?")]),a("v-card-text",[e._v("You're about to delete "+e._s(e.tournament.name)+" from the database. This action cannot be undone.")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteTournament(e.tournament._id)}}},[e._v(" Yes ")]),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){e.deleteModal=!1}}},[e._v(" Cancel ")])],1)],1)],1)],1),a("TournamentTable",{attrs:{tournament:e.tournament}}),a("div",{staticClass:"rounds d-flex align-start flex-wrap"},e._l(e.tournament.rounds,(function(t){return a("RoundTable",{key:t._id,staticClass:"mt-12 mr-12",attrs:{round:t,tournamentID:e.tournament._id,user:e.user}})})),1)],1):e._e()},me=[],ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-simple-table",{staticClass:"table-background table-simple not-editable",scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("tr",[a("th",[e._v("Name")]),a("td",[e._v(e._s(e.tournament.name))])]),a("tr",[a("th",[e._v("ID")]),a("td",[e._v(e._s(e.tournament._id))])]),a("tr",[a("th",[e._v("Series ID")]),a("td",[e._v(e._s(e.tournament.series||"null"))])]),a("tr",[a("th",[e._v("Game")]),a("td",[e._v(e._s(e.tournament.game))])]),a("tr",[a("th",[e._v("Region")]),a("td",[e._v(e._s(e.tournament.region))])]),a("tr",[a("th",[e._v("Start date")]),a("td",[e._v(e._s(new Date(e.tournament.startDate).toLocaleString()))])]),a("tr",[a("th",[e._v("End date")]),a("td",[e._v(e._s(new Date(e.tournament.endDate).toLocaleString()))])])])]},proxy:!0}])})},fe=[],pe={props:{tournament:Object}},he=pe,be=(a("5f91"),Object(c["a"])(he,ve,fe,!1,null,null,null)),ge=be.exports;u()(be,{VSimpleTable:ce["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{color:"transparent",width:"25%",raised:""}},[a("v-snackbar",{attrs:{color:"secondary border--accent",bottom:"",right:"","multi-line":"",timeout:0},model:{value:e.changesMade,callback:function(t){e.changesMade=t},expression:"changesMade"}},[e._v(" Do you want to save the changes? "),a("v-btn",{attrs:{text:"",color:"accent"},on:{click:e.save}},[e._v(" Save ")])],1),a("div",{staticClass:"secondary"},[a("v-card-title",[e._v(" "+e._s(e.round.name)+" ")]),a("v-card-subtitle",[e._v(" "+e._s(new Date(e.round.startDate).toLocaleString())+" - "+e._s(new Date(e.round.endDate).toLocaleString())+" ")])],1),a("v-card-text",[a("v-data-table",{staticClass:"table-background table-shrinked overflow-hidden",class:{"not-editable":!e.user.roles.includes("teamleader")},attrs:{headers:e.headerHosts,"disable-pagination":!0,items:e.round.hosts,"disable-sort":"","no-data-text":"No hosts set.","hide-default-footer":""},scopedSlots:e._u([{key:"item.host",fn:function(t){var n=t.item;return[a("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("div",e._g({staticClass:"px-4"},r),[e._v(" "+e._s(n.host.nickname)+" "),a("div",{staticClass:"ml-auto"},[n.ready||n.host._id!==e.user._id?e._e():a("v-btn",{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),e.onReady(n)}}},[a("v-icon",{attrs:{color:"success"}},[e._v("mdi-check")])],1),n.ready?a("v-icon",{staticClass:"ml-auto",attrs:{color:"success"}},[e._v(" mdi-account-check ")]):a("v-icon",{staticClass:"ml-auto",attrs:{color:"error"}},[e._v(" mdi-account-remove ")])],1)])]}}],null,!0)},[e.user.roles.includes("teamleader")?a("v-list",e._l(e.noneSelect.concat(e.round.available),(function(t,r){return a("v-list-item",{key:r,on:{click:function(a){return e.changeRoundHost(e.round,n.host,t)}}},[a("v-list-item-title",[e._v(e._s(t.nickname))])],1)})),1):e._e()],1)]}},e.user.roles.includes("teamleader")?{key:"body.append",fn:function(){return[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{color:"success",width:"100%"}},n),[a("v-icon",[e._v("mdi-plus")])],1)]}}],null,!1,115759052)},[e.round.available.length?a("v-list",e._l(e.round.available,(function(t,n){return a("v-list-item",{key:n,on:{click:function(a){return e.addHostToRound(e.round,t)}}},[a("v-list-item-title",[e._v(e._s(t.nickname))])],1)})),1):a("v-list",[a("v-list-item",[a("v-list-item-title",[e._v("No available hosts.")])],1)],1)],1)]},proxy:!0}:null],null,!0)}),a("v-data-table",{staticClass:"table-background table-shrinked overflow-hidden mt-8",class:{"not-editable":!e.user.roles.includes("teamleader")},attrs:{headers:e.headerTLs,"disable-pagination":!0,items:e.round.teamLeads,"disable-sort":"","no-data-text":"No team leads set.","hide-default-footer":""},scopedSlots:e._u([{key:"item.teamLeads",fn:function(t){var n=t.item;return[a("div",{staticClass:"px-4"},[e._v(" "+e._s(n.teamLeads.nickname)+" "),a("div",{staticClass:"ml-auto"},[n.ready||n.teamLeads._id!==e.user._id?e._e():a("v-btn",{staticClass:"ml-auto",attrs:{icon:""},on:{click:function(t){return e.onReady(n)}}},[a("v-icon",{attrs:{color:"success"}},[e._v("mdi-check")])],1),n.ready?a("v-icon",{attrs:{color:"success"}},[e._v(" mdi-account-check ")]):a("v-icon",{attrs:{color:"error"}},[e._v(" mdi-account-remove ")])],1)])]}},e.user.roles.includes("teamleader")?{key:"body.append",fn:function(){return[a("v-btn",{attrs:{width:"100%",color:"success"}},[a("v-icon",[e._v("mdi-plus")])],1)]},proxy:!0}:null],null,!0)}),a("v-simple-table",{staticClass:"table-background mt-8 text-center table-simple",scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("tr",{class:{"not-editable":!e.user.roles.includes("teamleader")}},[a("th",[e._v("Best of")]),a("td",[e._v(e._s(e.round.bestOf))])])])]},proxy:!0}])})],1)],1)},_e=[],ye=(a("c740"),{props:{round:{type:Object,required:!0},tournamentID:{type:String,required:!0},user:Object},data:function(){return{noneSelect:["-"],changesMade:!1,roundCopy:Object.assign({},this.round),headerHosts:[{text:"Hosts",value:"host",align:"center"}],headerTLs:[{text:"Team leads",value:"teamLeads",align:"center"}]}},methods:{onReady:function(e){e.ready=!0},addHostToRound:function(e,t){this.changesMade=!0,e.hosts.push({host:t,ready:!1,lostHosting:!1}),e.available=e.available.filter((function(e){return e!==t}))},changeRoundHost:function(e,t,a){this.changesMade=!0;var n=e.hosts.findIndex((function(e){return e.host._id===t._id}));if(a===this.noneSelect[0])return e.hosts.splice(n,1);e.hosts.splice(n,1,{host:a,lostHosting:!1,ready:!1})},save:function(){var e=this;this.changesMade=!1;var t="/api";this.$http.post("".concat(t,"/tournaments/").concat(this.tournamentID,"/rounds/").concat(this.round._id,"/hosts"),{hosts:this.round.hosts,available:this.round.available}).then((function(t){e.$store.commit("snackbarMessage",{type:"success",message:"Round updated."})})).catch((function(t){e.$store.commit("snackbarMessage",{type:"error",message:"Error while updating."})}))}}}),xe=ye,we=(a("eb62"),a("e449")),Se=Object(c["a"])(xe,ke,_e,!1,null,null,null),Ve=Se.exports;u()(Se,{VBtn:f["a"],VCard:P["a"],VCardSubtitle:q["b"],VCardText:q["c"],VCardTitle:q["d"],VDataTable:se["a"],VIcon:b["a"],VList:g["a"],VListItem:_["a"],VListItemTitle:x["b"],VMenu:we["a"],VSimpleTable:ce["a"],VSnackbar:S["a"]});var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",staticStyle:{"min-width":"500px"}},[a("v-text-field",{attrs:{color:"accent",label:"Name","prepend-icon":"mdi-pencil",required:""},model:{value:e.draft.name,callback:function(t){e.$set(e.draft,"name",t)},expression:"draft.name"}}),a("v-menu",{attrs:{"close-on-content-click":!0,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Start date",color:"accent","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.draft.startDate,callback:function(t){e.$set(e.draft,"startDate",t)},expression:"draft.startDate"}},n))]}}]),model:{value:e.datepickerStart,callback:function(t){e.datepickerStart=t},expression:"datepickerStart"}},[a("v-date-picker",{attrs:{color:"secondary"},on:{input:function(t){e.datepickerStart=!1}},model:{value:e.draft.startDate,callback:function(t){e.$set(e.draft,"startDate",t)},expression:"draft.startDate"}})],1),a("v-menu",{attrs:{"close-on-content-click":!0,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"End date",color:"accent","prepend-icon":"mdi-calendar-check",readonly:""},model:{value:e.draft.endDate,callback:function(t){e.$set(e.draft,"endDate",t)},expression:"draft.endDate"}},n))]}}]),model:{value:e.datepickerEnd,callback:function(t){e.datepickerEnd=t},expression:"datepickerEnd"}},[a("v-date-picker",{attrs:{color:"secondary"},on:{input:function(t){e.datepickerStart=!1}},model:{value:e.draft.endDate,callback:function(t){e.$set(e.draft,"endDate",t)},expression:"draft.endDate"}})],1),a("v-text-field",{attrs:{type:"number",color:"accent",label:"Best of","prepend-icon":"mdi-pencil",required:""},model:{value:e.draft.bestOf,callback:function(t){e.$set(e.draft,"bestOf",t)},expression:"draft.bestOf"}}),a("v-text-field",{attrs:{type:"number",color:"accent",label:"TL Value","prepend-icon":"mdi-pencil",required:""},model:{value:e.draft.TLValue,callback:function(t){e.$set(e.draft,"TLValue",t)},expression:"draft.TLValue"}}),a("v-row",[a("v-spacer"),a("v-btn",{staticClass:"mt-8",attrs:{color:"accent black--text",text:""},on:{click:function(t){return e.$emit("submit",e.draft)}}},[e._v(" Create! ")]),a("v-btn",{staticClass:"mt-8",attrs:{color:"accent black--text",text:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" Cancel ")])],1)],1)},$e=[],Ce={props:{tournamentDates:{type:Object,required:!0}},data:function(){return{datepickerStart:!1,datepickerEnd:!1,draft:{name:"New round",startDate:(new Date).toISOString().substr(0,10),endDate:(new Date).toISOString().substr(0,10),bestOf:3,TLValue:3}}},created:function(){this.draft.startDate=this.tournamentDates.start.substr(0,10),this.draft.endDate=this.tournamentDates.end.substr(0,10)}},De=Ce,Re=a("2e4b"),Ee=Object(c["a"])(De,Te,$e,!1,null,null,null),Ae=Ee.exports;u()(Ee,{VBtn:f["a"],VDatePicker:Re["a"],VForm:N["a"],VMenu:we["a"],VRow:Q["a"],VSpacer:V["a"],VTextField:G["a"]});var Le={name:"Tournament",components:{TournamentTable:ge,RoundTable:Ve,RoundForm:Ae},props:{user:Object},data:function(){return{id:this.$route.params.tournamentID,tournament:null,loading:!0,deleteModal:!1,addRoundModal:!1}},methods:{getTournament:function(e){var t=this,a="/api";this.$http.get("".concat(a,"/tournaments/").concat(e)).then((function(e){t.tournament=e.data})).catch((function(e){404===e.response.status&&t.$router.push("/notfound")}))},addNewRound:function(e){var t=this,a="/api";this.addRoundModal=!1,this.$http.post("".concat(a,"/tournaments/").concat(this.tournament._id,"/rounds"),e).then((function(e){t.$store.commit("snackbarMessage",{message:"Round added!",type:"success"}),t.$router.go()})).catch((function(e){t.$store.commit("snackbarMessage",{message:"Error while deleting the tournament.",type:"error"})}))},deleteTournament:function(e){var t=this,a="/api";this.deleteModal=!1,this.$http.delete("".concat(a,"/tournaments/").concat(e)).then((function(e){t.$store.commit("snackbarMessage",{message:"Tournament successfully deleted!",type:"success"}),t.$router.push("/tournaments")})).catch((function(e){t.$store.commit("snackbarMessage",{message:"Error while deleting the tournament.",type:"error"})}))}},watch:{"$route.params":{handler:function(e){var t=e.tournamentID;t?this.getTournament(t):this.tournament=null},immediate:!0}}},Me=Le,Ie=a("169a"),Oe=a("ce7e"),je=Object(c["a"])(Me,de,me,!1,null,null,null),He=je.exports;u()(je,{VBtn:f["a"],VCard:P["a"],VCardActions:q["a"],VCardText:q["c"],VCardTitle:q["d"],VContainer:B["a"],VDialog:Ie["a"],VDivider:Oe["a"],VSpacer:V["a"]});var Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("InfoGrid",{scopedSlots:e._u([{key:"pageTitle",fn:function(){return[e._v(" 404 - Page not found ")]},proxy:!0},{key:"messageTitle",fn:function(){return[e._v(" "+e._s(e.randomMessage.title)+" ")]},proxy:!0},{key:"action",fn:function(){return[a("v-btn",{attrs:{color:"accent black--text"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("Take me back!")])]},proxy:!0}])},[e._t("default",[e._v(e._s(e.randomMessage.message))])],2)},Pe=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":""}},[a("div",{staticClass:"flex-column d-flex flex-grow-1 justify-space-around fill-height text-center"},[a("h1",{staticClass:"display-2 font-weight-bold accent--text"},[e._t("pageTitle")],2),a("div",[a("h2",{staticClass:"display-2"},[e._t("messageTitle")],2),a("h3",{staticClass:"subtitle-1 mt-4"},[e._t("default")],2)]),a("div",[e._t("action")],2)])])},Fe=[],Be={},Ne=Object(c["a"])(Be,qe,Fe,!1,null,null,null),Qe=Ne.exports;u()(Ne,{VContainer:B["a"]});var Ge={name:"Page404",components:{InfoGrid:Qe},computed:{randomMessage:function(){return this.messages[Math.floor(Math.random()*this.messages.length)]}},data:function(){return{messages:[{title:"You are lost in the woods...",message:"... and I don't know what path you are on."},{title:"Hmmm...",message:"How did you end up here?"},{title:"Wrong address!",message:"This place... you shouldn't be here."},{title:"Nothing to find here.",message:"I guess it would have been an amazing place... but unfortunately we don't have anything here."},{title:"Not a step back!",message:"Actually... you have to. There is nothing I can show you here."},{title:"Typo?",message:"Or someone sent you a wrong link. Or you smashed a keyboard before pressing ENTER. Or someone sent you a link after smashing their keyboard. Anyway, wrong address!"},{title:"Game over",message:"The darkness of the 404 page is all that awaits you now."}]}}},Ye=Ge,Je=Object(c["a"])(Ye,Ue,Pe,!1,null,null,null),We=Je.exports;u()(Je,{VBtn:f["a"]});var ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("InfoGrid",{scopedSlots:e._u([{key:"pageTitle",fn:function(){return[e._v(" 403 - Forbidden ")]},proxy:!0},{key:"messageTitle",fn:function(){return[e._v(" "+e._s(e.randomMessage.title)+" ")]},proxy:!0},{key:"action",fn:function(){return[a("v-btn",{attrs:{color:"accent black--text"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("I'll be back!")])]},proxy:!0}])},[e._t("default",[e._v(e._s(e.randomMessage.message))])],2)},Ke=[],Xe={name:"Page403",components:{InfoGrid:Qe},computed:{randomMessage:function(){return this.messages[Math.floor(Math.random()*this.messages.length)]}},data:function(){return{messages:[{title:"Not today, son...",message:"... not everything is allowed with your experience. Come back later."},{title:"I'm sorry...",message:"Someone must've made a mistake while settings permissions. Because you should have permissions, right? Right?"},{title:"Did somebody say permissions?",message:""}]}}},Ze=Xe,et=Object(c["a"])(Ze,ze,Ke,!1,null,null,null),tt=et.exports;u()(et,{VBtn:f["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%",color:"transparent",flat:""}},[a("v-card-title",[e._v(" Unconfirmed users "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",color:"accent"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"table-background",attrs:{headers:e.headers,items:e.users,search:e.search,"item-key":"_id","show-select":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.createdAt",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(new Date(n.createdAt).toLocaleString()))])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"accent black--text",attrs:{disabled:!e.selected.length},on:{click:e.confirm}},[e._v("Confirm selected")])],1)],1)},nt=[],rt={data:function(){return{search:"",selected:[],users:[],headers:[{text:"Nickname",value:"nickname"},{text:"ID",value:"_id"},{text:"Registration date",value:"createdAt"}]}},methods:{confirm:function(){var e=this,t=[];this.selected.forEach((function(a){var n="/api";t.push(e.$http.post("".concat(n,"/users/").concat(a._id,"/confirm")).catch((function(e){return e})))})),Promise.all(t).then((function(){e.$store.commit("snackbarMessage",{type:"success",message:"Users confirmed."}),e.$router.go()})).catch((function(t){e.$store.commit("snackbarMessage",{type:"error",message:"Error while confirming users."})}))}},mounted:function(){var e=this,t="/api";this.$http.get("".concat(t,"/users/unconfirmed")).then((function(t){e.users=t.data})).catch((function(e){}))}},ot=rt,st=Object(c["a"])(ot,at,nt,!1,null,null,null),it=st.exports;u()(st,{VBtn:f["a"],VCard:P["a"],VCardActions:q["a"],VCardTitle:q["d"],VDataTable:se["a"],VSpacer:V["a"],VTextField:G["a"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%",color:"transparent",flat:""}},[a("v-card-title",[e._v(" Users "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",color:"accent"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"table-background",attrs:{headers:e.headers,items:e.users,search:e.search,"item-key":"_id","show-select":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.createdAt",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(new Date(n.createdAt).toLocaleString()))])]}},{key:"item.roles",fn:function(t){var n=t.item;return[a("v-select",{attrs:{items:e.roles,value:e.getHighestRole(n.roles),"background-color":"transparent",color:"accent",solo:"",flat:"","hide-details":""},on:{input:function(t){return e.saveRole(n._id,t)}}})]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},lt=[],ut=(a("a4d3"),a("e01a"),a("d28b"),{data:function(){return{search:"",selected:[],users:[],roles:[],headers:[{text:"Nickname",value:"nickname"},{text:"ID",value:"_id"},{text:"Registration date",value:"createdAt"},{text:"Role",value:"roles",width:250,align:"center"}]}},methods:{getHighestRole:function(e){var t=!0,a=!1,n=void 0;try{for(var r,o=this.roles[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(e.includes(s))return s}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}},saveRole:function(e,t){var a=this,n="/api";this.$http.put("".concat(n,"/users/").concat(e,"/roles"),{role:t}).then((function(e){a.$store.commit("snackbarMessage",{message:"Role saved!",type:"success"})})).catch((function(e){return a.$store.commit("snackbarMessage",{message:"Error while saving role.",type:"error"})}))}},mounted:function(){var e=this,t="/api";this.$http.get("".concat(t,"/collections/roles")).then((function(t){e.roles=t.data})),this.$http.get("".concat(t,"/users/")).then((function(t){e.users=t.data})).catch((function(e){}))}}),dt=ut,mt=a("b974"),vt=Object(c["a"])(dt,ct,lt,!1,null,null,null),ft=vt.exports;u()(vt,{VCard:P["a"],VCardTitle:q["d"],VDataTable:se["a"],VSelect:mt["a"],VSpacer:V["a"],VTextField:G["a"]});var pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-panel"},[a("h1",[e._v("Admin panel")]),a("router-view")],1)},ht=[],bt={},gt=Object(c["a"])(bt,pt,ht,!1,null,null,null),kt=gt.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%",color:"transparent",flat:""}},[a("v-card-title",[e._v(" Create a tournament "),a("v-spacer")],1),a("v-card-text",[a("v-row",[a("TournamentForm",{on:{submit:function(t){return e.saveTournament(t)}}})],1)],1)],1)},yt=[],xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",staticStyle:{"min-width":"500px"}},[a("v-text-field",{attrs:{color:"accent",label:"Name","prepend-icon":"mdi-pencil",required:""},model:{value:e.draft.name,callback:function(t){e.$set(e.draft,"name",t)},expression:"draft.name"}}),a("v-select",{attrs:{items:e.seriesList,label:"Series","prepend-icon":"mdi-view-list",color:"accent"},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.name)+" ")]}},{key:"selection",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.name)+" ")]}}]),model:{value:e.draft.series,callback:function(t){e.$set(e.draft,"series",t)},expression:"draft.series"}}),a("v-menu",{attrs:{"close-on-content-click":!0,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"Start date",color:"accent","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.draft.startDate,callback:function(t){e.$set(e.draft,"startDate",t)},expression:"draft.startDate"}},n))]}}]),model:{value:e.datepickerStart,callback:function(t){e.datepickerStart=t},expression:"datepickerStart"}},[a("v-date-picker",{attrs:{color:"secondary"},on:{input:function(t){e.datepickerStart=!1}},model:{value:e.draft.startDate,callback:function(t){e.$set(e.draft,"startDate",t)},expression:"draft.startDate"}})],1),a("v-menu",{attrs:{"close-on-content-click":!0,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"End date",color:"accent","prepend-icon":"mdi-calendar-check",readonly:""},model:{value:e.draft.endDate,callback:function(t){e.$set(e.draft,"endDate",t)},expression:"draft.endDate"}},n))]}}]),model:{value:e.datepickerEnd,callback:function(t){e.datepickerEnd=t},expression:"datepickerEnd"}},[a("v-date-picker",{attrs:{color:"secondary"},on:{input:function(t){e.datepickerStart=!1}},model:{value:e.draft.endDate,callback:function(t){e.$set(e.draft,"endDate",t)},expression:"draft.endDate"}})],1),a("v-select",{attrs:{items:e.gamesList,label:"Game","prepend-icon":"mdi-gamepad",color:"accent",disabled:!!e.draft.series},model:{value:e.draft.game,callback:function(t){e.$set(e.draft,"game",t)},expression:"draft.game"}}),a("v-select",{attrs:{items:e.regionsList,label:"Region","prepend-icon":"mdi-earth",color:"accent",disabled:!!e.draft.series},model:{value:e.draft.region,callback:function(t){e.$set(e.draft,"region",t)},expression:"draft.region"}}),a("v-checkbox",{attrs:{label:"Counted by rounds","prepend-icon":"mdi-currency-usd",color:"accent"},model:{value:e.draft.countedByRounds,callback:function(t){e.$set(e.draft,"countedByRounds",t)},expression:"draft.countedByRounds"}}),a("v-btn",{staticClass:"mt-8",attrs:{color:"accent black--text",large:""},on:{click:function(t){return e.$emit("submit",e.draft)}}},[e._v(" Create! ")])],1)},wt=[],St={data:function(){return{datepickerStart:!1,datepickerEnd:!1,draft:{name:"Unnamed tournament",startDate:(new Date).toISOString().substr(0,10),endDate:(new Date).toISOString().substr(0,10),series:null,game:"",region:"",countedByRounds:!0},regionsList:[],gamesList:[],seriesList:[]}},created:function(){var e=this,t="/api";this.$http.get("".concat(t,"/collections/games")).then((function(t){e.gamesList=t.data})),this.$http.get("".concat(t,"/collections/regions")).then((function(t){e.regionsList=t.data})),this.$http.get("".concat(t,"/series/list")).then((function(t){e.seriesList=t.data}))}},Vt=St,Tt=a("ac7c"),$t=Object(c["a"])(Vt,xt,wt,!1,null,null,null),Ct=$t.exports;u()($t,{VBtn:f["a"],VCheckbox:Tt["a"],VDatePicker:Re["a"],VForm:N["a"],VMenu:we["a"],VSelect:mt["a"],VTextField:G["a"]});var Dt={components:{TournamentForm:Ct},methods:{saveTournament:function(e){var t=this,a="/api";this.$http.post("".concat(a,"/tournaments/"),e).then((function(e){t.$store.commit("snackbarMessage",{message:"Tournament saved!",type:"success"}),t.$router.push("/tournaments")})).catch((function(e){return t.$store.commit("snackbarMessage",{message:"Error while saving.",type:"error"})}))}}},Rt=Dt,Et=Object(c["a"])(Rt,_t,yt,!1,null,null,null),At=Et.exports;u()(Et,{VCard:P["a"],VCardText:q["c"],VCardTitle:q["d"],VRow:Q["a"],VSpacer:V["a"]});var Lt=a("2f62"),Mt=a("bc3a"),It=a.n(Mt),Ot=function(e){var t=["Hello ".concat(e,", how are you?"),"Feeling inquisitive, huh?","Hey, you were not supposed to open the dev console!"];return t[Math.floor(Math.random()*t.length)]};n["a"].use(Lt["a"]);var jt="/api",Ht=new Lt["a"].Store({state:{status:"",token:localStorage.getItem("token"),snackbar:{type:"",message:""}},mutations:{AUTH_REQUEST:function(e){e.status="pending"},AUTH_SUCCESS:function(e,t){e.status="success",e.token=t},AUTH_ERROR:function(e){e.status="error"},logout:function(e){e.status="",e.token=""},snackbarMessage:function(e,t){var a=t.type,n=t.message;e.snackbar.type=a,e.snackbar.message=n}},actions:{login:function(e,t){var a=e.commit;return new Promise((function(e,n){a("AUTH_REQUEST"),It.a.post("".concat(jt,"/auth"),t).then((function(t){var n=t.data.token,r=t.data.user;localStorage.setItem("token",n),It.a.defaults.headers.common["x-auth-token"]=n,a("AUTH_SUCCESS",n),console.log(Ot(r.nickname)),e(t)})).catch((function(e){a("AUTH_ERROR"),localStorage.removeItem("token"),n(e)}))}))},register:function(e,t){var a=e.commit;return new Promise((function(e,n){a("AUTH_REQUEST"),It.a.post("".concat(jt,"/users/"),t).then((function(t){var n=t.headers["x-auth-token"],r=t.data;localStorage.setItem("token",n),It.a.defaults.headers.common["x-auth-token"]=n,a("AUTH_SUCCESS",n),console.log(Ot(r.nickname)),e(t)})).catch((function(e){a("AUTH_ERROR"),localStorage.removeItem("token"),n(e)}))}))},getUserData:function(e){var t=e.commit;return new Promise((function(e,a){t("AUTH_REQUEST");var n=It.a.defaults.headers.common["x-auth-token"];It.a.get("".concat(jt,"/users/me")).then((function(a){a.data.user;t("AUTH_SUCCESS",n),e(a)})).catch((function(e){t("AUTH_ERROR"),localStorage.removeItem("token"),a(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e,a){t("logout"),localStorage.removeItem("token"),delete It.a.defaults.headers.common["x-auth-token"],qt.push("/login"),e()}))}},getters:{isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status}}});n["a"].use(D["a"]);var Ut=[{path:"/",name:"Home",component:I,meta:{requiresAuth:!0}},{path:"/tournaments",name:"Tournaments",component:ue,meta:{requiresAuth:!0}},{path:"/tournaments/:tournamentID",name:"Tournament",component:He,meta:{requiresAuth:!0,requiredRole:"host"}},{path:"/login",name:"Login",component:W},{path:"/register",name:"Register",component:te},{path:"/admin",meta:{requiresAuth:!0,requiredRole:"admin"},component:kt,children:[{path:"unconfirmed",name:"Confirm",component:it},{path:"users",name:"Users",component:ft},{path:"tournaments/create",name:"Create tournament",component:At}]},{path:"*",name:"404",component:We},{path:"/restricted",name:"Restricted",component:tt}],Pt=new D["a"]({mode:"history",base:"/",routes:Ut});Pt.beforeEach((function(e,t,a){if(Ht.getters.isLoggedIn&&("Login"===e.name||"Register"===e.name))return a("/");if(e.matched.some((function(e){return e.meta.requiresAuth}))){if(Ht.getters.isLoggedIn)return a();a("/login")}else a()})),Pt.beforeEach((function(e,t,a){var r=n["a"].$jwt.decode();if(e.matched.some((function(e){return e.meta.requiredRole}))){var o=e.matched.find((function(e){return e.meta.requiredRole})),s=o.meta.requiredRole;if(r.roles.includes(s))return a();a("/restricted")}else a()}));var qt=Pt,Ft=a("f309");n["a"].use(Ft["a"]);var Bt=new Ft["a"]({theme:{options:{customProperties:!0},dark:!0,themes:{dark:{primary:"#1E1E2D",secondary:"#A0251E",accent:"#FFCA19",anchor:"#FFCA19"}}}}),Nt=a("c051"),Qt=a.n(Nt);n["a"].use(Qt.a,{keyName:"token"}),n["a"].config.productionTip=!1,n["a"].prototype.$http=It.a;var Gt=localStorage.getItem("token");Gt&&(n["a"].prototype.$http.defaults.headers.common["x-auth-token"]=Gt),new n["a"]({router:qt,store:Ht,vuetify:Bt,render:function(e){return e(C)}}).$mount("#app")},"5f91":function(e,t,a){"use strict";var n=a("825b"),r=a.n(n);r.a},"825b":function(e,t,a){},a535:function(e,t,a){},d612:function(e,t,a){},eb62:function(e,t,a){"use strict";var n=a("d612"),r=a.n(n);r.a}});
//# sourceMappingURL=app.96853b8a.js.map