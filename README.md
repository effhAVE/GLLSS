# GLLSS - Global Loot League Staff Scheduler

GLLSS is a web application created to make the life of GLL Staff easier.
It includes many features which are supposed to make spreadsheet usage no longer necessary, automate some processes and open new possibilities.
The list of features can be found [here](#features).

## Backstory
Once I joined GLL team my dear friend Michelle (host lead for GLL) told me about the web app idea which was suggested by one of the employees. She wanted to make it on her own but since she was lacking time and skills needed I offered my help to take over the development. I started right away (5th of March 2020) and after 1.5 month the primary version was ready.

## Features

## Tech
- ### Backend
  - Node.js
  - MongoDB
  - bcrypt
  - Nodemailer
  - Joi
  - Winston, morgan
  - JSONWebToken
- ### Frontend
  - Vue.js with Vuex/Vue Router
  - Vuetify
  - Babel
  - Webpack
  - Axios
  - moment

### Installation

GLLSS requires [Node.js](https://nodejs.org/) v8.\* to run.

Install the dependencies and devDependencies and start the server.

```sh
$ cd gllss
$ npm install
$ node index
```
## Introduction
Purpose of the site is to help staff, especially hosts and teamleaders of GLL to make schedule for them when to work as the main aspect. They can put their availability for certain tournaments and then being scheduled. Site offers as well more functionalities to ease the work. There are several roles to divide people based on their position. We will look into each role and describe the site, functionalities and possibilities within each role.

## Roles
Site has right now these roles:
- Uncomfirmed User
- Guest
- Host
- TeamLeader
- Admin
- MasterAdmin

### Unconfirmed User
First thing first, to access the site a person has to register. On the image shown, it can be seen how the login page looks like.
![Login Page](https://i.imgur.com/avUSHKr.png)
Clicking on **Register now**, you will be able to create an account where you need to select:
* Nickname - which is at least 4 characters long, has to be unique
* Email address - your email address, has to be unique
* Password - Has to consist of at least one number, one capital letter and has to be at least 5 characters long

Once you do fill all the information and you wil ltry to log in, you will see the site will not allow it and will throw an error.
![Verification error](https://i.imgur.com/dqh0bfO.png). 
To step up from this, you have to go to your email address and check the email, so you can confirm your account. If you cannot see any email, try to look into trashbin. If you still cannot find it, then you can click on **Need Verification Email?** Email should like like picture below and you can either click on button or link.
![Verification error](https://i.imgur.com/EKkQPSE.png). 
Once you click on the Button, you will become Guest and will be able to log in.

### Guest
As a guest you will be able to log in to the side and see the message, that before you can continue you have to be confirmed as shown on the picture. 
![Guest Menu](https://i.imgur.com/845Gfd6.png).
List of current admins is generated by database of users who have admin or masteradmin role. You cannot access any other part of the site, if you will try to type something into URL then you will get information of revoked Access and **Error 403**, the button for returning back will be shown too. If on other hand you will try to type a site which does not exist, you will get an **Error 404**.

##### Password Reset
If you forgot your password, you can click on **forgot yourr password?** from the login screen, you will be prompted to type your email address. After that email will arrive in the same style as confirmation email and link will redirect you to password reset page. 
![Password Reset Page](https://i.imgur.com/wul4KCY.png).
If you fill it up, you will ge t a message that password was changed and you can log in using a new password. 

### Host
To become a host, you have to be confirmed by one of the admins. If you had been confirmed, you will have to relog to the page to see the changes. Ass a host you will finally see a menu of items and we will go through all of them.
![Host Menu Items](https://i.imgur.com/t70H12Q.png).

##### Hosting Guide
Hosting Guide is a step by step guide for hosts how to host each game individually, it is a link to google document which on clicking opens in new wwindow. Plan is to move teh guide to be editable on to the page. 

##### Teamkills Script
It is a script, which looks at the Teamkill Value of PUBG games through their API. GLL site does not have the teamkills fixed while scoring through API and this is easy tool to correct the teamkills if there are any. Script will always show the right amount of kills which person should have. To make it work you have to paste the full match ID from PUBG and click on search. 
![TeamKills Script](https://i.imgur.com/jMxJB0j.png).

##### Tournaments - Overview
This is where we start with main functionalities of the site. As the host you want to host specific tournaments, and on this page you have all upcoming/running tournaments and past tournaments. It looks like on the picture and we will go through each point. 
![Tournament Overview](https://i.imgur.com/xQ9ME3s.png).
**Active Tournaments** are all tournaments which did not end up yet. They are default sorted out by their start Date.
**Past Tournament** are all tournament which End time already past the current time. They are sroted by the end time. Tournament which ended up most recently will be on top. 
If you would like to use another ordering, you can order Upcoming or Past tournaments by clicking on the Game/Start Date or End Date. If you click on Game Tournaments will be ordered the same way, bbut bundled by game first. 
![Game ordering](https://i.imgur.com/RoZUw4O.png).
On Default there are only 10 tournaments showed up, to load more, there  is a Load More button on the bottom to load additional 10 more tournaments. 
![Load More Button](https://i.imgur.com/AnNj8DU.png)
Now to specify each of the fields of the tournament
- Available - This is a clickable field, to put up your availability. If you click it in the tournament, you will put availability for teh full tournament with all the rounds inside. 
- Hosting - This field is not clickable and it will show only if you are selected as a host/Teamleader
- Tournament Name - This one is clickable field again and it will redirect you to the tournament itself, which will be spcecified here too. 
- Game - Shows a game in which tournament is held. 
- Start Date - It is a Start Date and time of the tournament. Displayed in your local time.
- End Date - It is a End Date and time of the tournament. Displayed in your local time.

**Search** Field allow you to filter upcoming tournaments. You can either type some string from the tournament or specify the game by typing Game.
If you click anywhere except Tournament Name onto the Tournament row, the tournament will expand to its Rounds as well and you can see slightly more detailed information of Rounds
![Rounds in OverView](https://i.imgur.com/PbgmdRh.png)
Rounds displaying consists of:
- Available - Again a clickable field, to put up your availability but now only for specified Round
- Hosting - This field is not clickable and it will show only if you are selected as a host/Teamleader for the Round.
- Round Name - Specifying the name of the round.
- Best Of - Shows amount of games which are held within the round, so hosts now how many games they will be hosting.
- Start Date - It is a Start Date and time of the round. Displayed in your local time.
- End Date - It is a End Date and time of the round. Displayed in your local time.

There is one more button **Expand All** . Clicking on the button it will expand all the tournaments to have as well round view. Clickikng again will collapse them instead. 

To select availability you have to click on Hosting fields to choose to your liking what would you like to host. And then you have to confirm the changes. You can then redo the availability as long as you can, if you are already not hosting, then the second field will be marked and you will be unable to change your availability.
![Availability Changes](https://i.imgur.com/jgGxvDc.png)
Last part will show how does it look like, when you are selected for Hosting. You can see that Available field became grey and is not clickable anymore. 
![Selected for Hosting](https://i.imgur.com/fko9dJn.png)
Now we will move if you click on any of the tournaments names. 

##### Tournaments - Specific Tournament 
Being in the tournament, will show more information about the tournament. which was not specified in the Tournaments Overview.
![Tournament](https://i.imgur.com/Waq761H.png)
To specify additional fields.
- ID - ID of the tournament, auto-generated, it is unique
- Series ID - ID of the series tournament is in. This is clickable link which will lead to display full series. Series will be described later.
- Admin Page URL - This is a direct link to tournament page of GLL onto the same tournament. Link is to ease the work and you can just click on it to go straight into the tournament at GLL.
- Region - Specifying in which region the tournament is held in. 

Second part of the tournaments is its Round View.
![Tournament Round View](https://i.imgur.com/goTeVhh.png)
On the top is specified name of the round and its start and end date. Then you can see selected hosts/team leads and icons next to it. On the bottom is displayed best of. 
Icons can be:
- Green - Person did click Ready
- Red - Person did not click Ready
- Orange - Person did click ready, but group did not happen, so host did loose hosting 

You can as well see some numbers next to hosts/teamleads. If the numbers are for hosts, it is the additional or revkoed rounds for specific Host, so on Example Picture Leodaddy has +4. Means he did host 2 and as well 4 more so at the end it is 6 rounds. 
Then when it comes to TeamLeads, it is specifying time. So Towby did lead 60 minutes less then he was supposed to. 

Last part what you can do as a host on Tournament Page is clicking Ready, which is next to your name. But Ready button only displays one hour before the tournament and becomes unavailable 30 minutes before. It is a check-in for hosts to see if they are ready within speicifc timeframe before the tournament. 
![Not clickable](https://i.imgur.com/LoY4gm4.png) ![Clickable](https://i.imgur.com/zEB21jD.png) ![Clicked](https://i.imgur.com/tPpk9ed.png)
As you can see on picture, by defualt, the button is grey, but if you are within the needed tiemframe, it will become clickable. One you click it, you cannot unclick it.

##### Series
Series is a database or a list of all series, which are created. Series of the tournaments can be specified, that tournament inside have in common:
- Game
- Partially the name
- Region

![Series Overview](https://i.imgur.com/SGeITAf.png)
As we can see common things which series inherit are displayed in overview. Additionally you can see how many tournaments are already within the series, called as Tournaments count. If you click on any of the series, you will go to specified series itself. 
![Specific Series Overview](https://i.imgur.com/ZsMe63o.png)
On the top of series itself, you can see the series name and then fields:
- Name - Name of the series
- ID - ID of the series
- Game - Game in which series is held
- Region - Region for the series
- Recurrence - can be: 
  - daily - Tournaments are happening several times in the week, the name of the tournaments then is generated as `#WN DDD Series Name` - where WN is Week Number and DDD day of the week in at first three letters
  - weekly - Tournaments happen at most once a week. The name is then generated as follows `#WN Series Name` - where WN is a week number.
 - Start Date - start date and time of the series 
 - End Date - end date and time of the series 
 
You can see here as well **Load Series' Tournaments** button, which will show all the tournaments within the series, and clicking on Tournaments we will go to Tournament itself.
![Series Tournaments Overview](https://i.imgur.com/0luFAhO.png)

##### Calendar
Calendar is a week based overview of all the rounds in a compact way, so you have better overview of the tournaments, rounds, hosting. 